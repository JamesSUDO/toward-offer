# 整数中1出现的次数

[链接](https://www.nowcoder.com/practice/bd7f978302044eee894445e244c7eee6?tpId=13&tqId=11184&tPage=2&rp=2&ru=/ta/coding-interviews&qru=/ta/coding-interviews/question-ranking)

求出1~13的整数中1出现的次数,并算出100~1300的整数中1出现的次数？为此他特别数了一下1~13中包含1的数字有1、10、11、12、13因此共出现6次,但是对于后面问题他就没辙了。ACMer希望你们帮帮他,并把问题更加普遍化,可以很快的求出任意非负整数区间中1出现的次数（从1 到 n 中1出现的次数）。



我的方法是直接对1到n循环，对每一次的n都计算有多少个1，最后加起来。时间复杂度o(n)，此方法不建议。



官方解法时间复杂度o(logn)，思想是从数字规律入手，找到这样一个方法计算1的个数：拿21345来举例，把1~21345分为两段，一段是1346~21345，另一段是1~1345。

我们先分析1346~21345，计算1出现次数考虑两种情况：1出现在最高位和1出现在其它位。当1出现在最高位时，我们可以发现满足条件的情况是10000~19999，或者可计算的出：(2 - 1) * 10<sup>4</sup>。注意这个式子不是所有情况都适用：如果21344改成11345，那么满足条件的只有10000~11345这(1345 + 1)种情况。然后看当1出现在其它位上时，最高为数字可以为0和1（假设最高位2的情况全转移到最高位0的情况），1可以出现除最高位外剩下4个位置，然后其它位有10<sup>4</sup>种情况，因此1出现次数为2 * 4 * 10<sup>4</sup> 。

然后分析1~1345，同样分成两段考虑：346~1345和1~345，分析方法同上。

注意本解法是比较两个string，因此需要先把int转成string。

综上，可以把函数写成递归形式，每次执行都分两段处理，先算第一段，再递归计算第二段，直到分不下去为止。